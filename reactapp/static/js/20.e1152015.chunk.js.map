{"version":3,"sources":["images/svg/arrow-right-white.svg","views/SavedProperty.js"],"names":["module","exports","__webpack_require__","p","SavedProperty","_useState","useState","_useState2","Object","E_Python_MallorcaMagc_clean_for_deploy_mallorcamagic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","guide","setGuide","openModal","useSavedPropertyFormModal","token","useRecoilValue","AuthToken","_useState3","_useState4","isLoading","setIsLoading","useEffect","axios","get","concat","HOST_NAME","headers","Authorization","then","res","console","log","data","results","catch","err","handleOpen","useCallback","handleDelete","slug","delete","status","newGuide","filter","item","finally","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","className","_containers_DefaultLayout__WEBPACK_IMPORTED_MODULE_8__","length","onClick","map","_components_Guide_GuideCard_SecondGuideCard__WEBPACK_IMPORTED_MODULE_6__","save","key","image","thumbnail","title","price","price_unit","price_amount","bedrooms","bathrooms","area","id","onDelete","isSaved","react_inlinesvg__WEBPACK_IMPORTED_MODULE_3__","src","Heart","react_router_dom__WEBPACK_IMPORTED_MODULE_4__","to","ArrowRight"],"mappings":"8EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,4QCc3BC,EAAgB,WAAM,IAAAC,EACPC,mBAAS,IADFC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAC1BK,EAD0BH,EAAA,GACnBI,EADmBJ,EAAA,GAEzBK,EAAcC,cAAdD,UACFE,EAAQC,YAAeC,KAHIC,EAICX,oBAAS,GAJVY,EAAAV,OAAAC,EAAA,EAAAD,CAAAS,EAAA,GAI1BE,EAJ0BD,EAAA,GAIfE,EAJeF,EAAA,GAOjCG,oBAAU,WACRC,IAAMC,IAAN,GAAAC,OAAaC,IAAb,2BAAiD,CAAEC,QAAS,CAAEC,cAAa,SAAAH,OAAWV,MACnFc,KAAK,SAAAC,GACJC,QAAQC,IAAIF,EAAIG,MAChBrB,EAASkB,EAAIG,KAAKC,WAEnBC,MAAM,SAAAC,GACLL,QAAQC,IAAII,MAEf,CAACrB,IAEJ,IAAMsB,EAAaC,sBAAY,WAC7BzB,EAAU,eACT,CAACA,IAEE0B,EAAeD,sBAAY,SAAAE,GAC/BnB,GAAa,GACbE,IAAMkB,OAAN,GAAAhB,OAAgBC,IAAhB,uBAAgD,CAAEO,KAAM,CAAEO,QAAQb,QAAS,CAAEC,cAAa,SAAAH,OAAWV,MAClGc,KAAK,SAAAC,GACJ,GAAmB,MAAfA,EAAIY,OAAgB,CACtB,IAAMC,EAAWhC,EAAMiC,OAAO,SAAAC,GAAI,OAAIA,EAAKL,OAASA,IACpD5B,EAAS+B,MAGZR,MAAM,SAAAC,GAAG,OAAIL,QAAQC,IAAII,KACzBU,QAAQ,kBAAMzB,GAAa,MAC7B,CAACN,EAAOJ,EAAOC,IAGlB,OACEmC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,0BACbH,EAAAC,EAAAC,cAACE,EAAA,EAAD,KACEJ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACbH,EAAAC,EAAAC,cAAA,8BACC7B,GAAa2B,EAAAC,EAAAC,cAAA,0CACbtC,EAAMyC,OAASL,EAAAC,EAAAC,cAAA,UAAQI,QAAShB,GAAjB,cAAmD,IAEpE1B,EAAMyC,OACLL,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBACZvC,EAAM2C,IAAI,SAAAT,GACT,OACEE,EAAAC,EAAAC,cAACM,EAAA,EAAD,CAAiBC,MAAI,EAACC,IAAKZ,EAAKL,KAAMkB,MAAOb,EAAKc,UAAWC,MAAOf,EAAKe,MAAOC,MAAK,GAAApC,OAAKoB,EAAKiB,WAAV,KAAArC,OAAwBoB,EAAKkB,cAAgBC,SAAUnB,EAAKmB,SAC/IC,UAAWpB,EAAKoB,UAAWC,KAAMrB,EAAKqB,KAAMC,GAAItB,EAAKL,KAAM4B,SAAU7B,EAAc8B,SAAS,OAKpGtB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,IAAKC,MACXzB,EAAAC,EAAAC,cAAA,0DACAF,EAAAC,EAAAC,cAAA,gFACAF,EAAAC,EAAAC,cAACwB,EAAA,EAAD,CAAMC,GAAG,sBAAT,qBAAgD3B,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,IAAKI,YAU1DtE","file":"static/js/20.e1152015.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/arrow-right-white.a4852aa2.svg\";","import axios from \"axios\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport Isvg from 'react-inlinesvg';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useRecoilValue } from \"recoil\";\r\nimport { SecondGuideCars } from \"../components/Guide/GuideCard/SecondGuideCard\";\r\nimport { HOST_NAME } from \"../config\";\r\nimport { DefaultLayout } from '../containers/DefaultLayout';\r\nimport ArrowRight from '../images/svg/arrow-right-white.svg';\r\nimport Heart from '../images/svg/heart.svg';\r\nimport { useSavedPropertyFormModal } from \"../modals/Property/Provider\";\r\nimport { AuthToken } from \"../recoilState/User\";\r\n\r\n\r\nexport const SavedProperty = () => {\r\n  const [guide, setGuide] = useState([]);\r\n  const { openModal } = useSavedPropertyFormModal();\r\n  const token = useRecoilValue(AuthToken);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  // We need pagination here\r\n\r\n  useEffect(() => {\r\n    axios.get(`${HOST_NAME}api/saved/property/get/`, { headers: { Authorization: `Token ${token}` } })\r\n      .then(res => {\r\n        console.log(res.data);\r\n        setGuide(res.data.results);\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }, [token]);\r\n\r\n  const handleOpen = useCallback(() => {\r\n    openModal(\"properties\");\r\n  }, [openModal]);\r\n\r\n  const handleDelete = useCallback(slug => {\r\n    setIsLoading(true);\r\n    axios.delete(`${HOST_NAME}api/saved/property/`, { data: { slug }, headers: { Authorization: `Token ${token}` } })\r\n      .then(res => {\r\n        if (res.status === 200) {\r\n          const newGuide = guide.filter(item => item.slug !== slug);\r\n          setGuide(newGuide);\r\n        }\r\n      })\r\n      .catch(err => console.log(err))\r\n      .finally(() => setIsLoading(false));\r\n  }, [token, guide, setGuide]);\r\n\r\n\r\n  return (\r\n    <div className=\"saved-property-wrapper\">\r\n      <DefaultLayout>\r\n        <div className=\"saved-property\">\r\n          <div className=\"header\">\r\n            <h1>Saved Properties</h1>\r\n            {isLoading && <h2>Loading bar, desing in figma</h2>}\r\n            {guide.length ? <button onClick={handleOpen}>Remove All</button> : \"\"}\r\n          </div>\r\n          {guide.length ?\r\n            <div className=\"saved-wrapper\">\r\n              {guide.map(item => {\r\n                return (\r\n                  <SecondGuideCars save key={item.slug} image={item.thumbnail} title={item.title} price={`${item.price_unit} ${item.price_amount}`} bedrooms={item.bedrooms}\r\n                    bathrooms={item.bathrooms} area={item.area} id={item.slug} onDelete={handleDelete} isSaved={true} />\r\n                )\r\n              })}\r\n            </div>\r\n            :\r\n            <div className=\"no-property\">\r\n              <Isvg src={Heart} />\r\n              <h2>You donâ€™t have any saved properties yet</h2>\r\n              <p>Browse our premium and luxurious properties Which you can save here</p>\r\n              <Link to=\"/property-selector\">Browse properties <Isvg src={ArrowRight} /></Link>\r\n            </div>\r\n\r\n          }\r\n        </div>\r\n      </DefaultLayout>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SavedProperty"],"sourceRoot":""}