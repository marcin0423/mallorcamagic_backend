{"version":3,"sources":["images/GuideLandingCover.png","images/svg/instagram.png","views/GuideLanding.js"],"names":["module","exports","__webpack_require__","p","GuideLanding","_useSearchParams","useSearchParams","_useSearchParams2","Object","E_Python_MallorcaMagc_clean_for_deploy_mallorcamagic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","searchParams","setSearchParams","_useState","useState","_useState2","searchQuery","setSearchQuery","_useState3","_useState4","guides","setGuides","_useState5","_useState6","hasMore","setHasMore","useEffect","searchGuides","useCallback","url","HOST_NAME","params","URLSearchParams","append","has","get","axios","then","response","status","data","more","handleGuideMenu","selected","createSearchParams","cat","handleShowMore","length","console","log","concat","E_Python_MallorcaMagc_clean_for_deploy_mallorcamagic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_3___default","a","createElement","className","_containers_DefaultLayout__WEBPACK_IMPORTED_MODULE_10__","coverImage","ActivityMenuCover","_components_Title__WEBPACK_IMPORTED_MODULE_8__","text","_components_FindGuide__WEBPACK_IMPORTED_MODULE_5__","onQueryChange","handleSearch","href","target","rel","src","Instagram","alt","_components_GuideLandingMenu__WEBPACK_IMPORTED_MODULE_7__","map","guide","_components_Guide_GuideCard__WEBPACK_IMPORTED_MODULE_6__","key","slug","image","thumbnail","title","details","desc","creator","id","isSaved","is_saved","onClick"],"mappings":"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","file":"static/js/15.1d573305.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/GuideLandingCover.49d453f5.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUqSURBVHgBnVVrbFRFFD5nZu5ru9uXtbE2mEIgIAhEGwsKEalGlCChSIkagyD4+CG/TfhhqolGoyGEYIj+oFJMDBTBIAEaE6EQ5aFoxVCrNrSAoYRS+trde+/ceTi3dbFdIAZOMvdO5vF9c853zgzCGOudNy+VgaJnFXpzQunMl9qZyrVdIJQNcYu0A5EyTf/Xl8q+IpTVHim7RRC39WLHmZMN0KBymBh/dH09zfR2z/QhsdFsqjFgCa6d3ki5viHgIgaVo6BiBDzXN+PCTghwPLOmJAJ2RSlrt47wo3Vdz52/TpB9evZ8La0mLqyJUlstXLh7AuV2GC8yyJx0GNrAwYEQbLPaMX2AkNvgqxSxlJUK0SuR2q3mir5pDlBhvNoDlnh1XfvKa0wvnZrKAm7QQk6kCt4qHuBb8PTRLNy+tWyf9OkXlo07gcByJehvZqwBMy/cv4xI1hQPJPx0LR7sDOE27eKS2soLPdUzBgcntF5zUrNAslahWIcVqBUEPbEAHFkADm+6E/DYSmd1vV5R3PFe6V1/3f3S2TU/MsJPMBrN5C7UMOLCY4rIPoLw5802dz6yaHKky98YFiVL0rJoUloUR4EoOOPL5A7FK7et6V4YJB7u2lgp1JcTu77pgZMAVPNDiGohUjKFga1mGKWvUsR0Pnjfkw8tUiL8MB2lZ0lgF6RibZIxYnJjikK2yYeemq1Vexuwrq4b4PxAbh9lYT/RClDbCQaOchDBDylmxoL7L06ZpHzRINPZ2UKSHajZVg+t9gDRcgiZCwo/AEpWoYPZeqhf3wzNMrfXQaElaKCogKEtR5OVyHGn13fp1zDDawiqHRXfnlqV59z+A5PfP+l50IZSPr902tJdzR3NR3KTFgmBaBIXYZKYEAHY8obY0xK+nBRFF6E0+hhuYos7N/TamN3kseHCFMk+OnbOgsCcnBuioIKho0CPeCDGAWARr0Kifol03wW4haXsvrOBSGazVDwwjoBGJv4KJChqNMiFCPIIolAzbTMQ9q0IPBxyLSbRQpnN94Cg2QnK/C2jtiGx82CwIPoBU9F9Xrm34FYEJXZfXQEbcJO0v23sODUemFoAC3lA4hCZC8XowMcTJMVeUigK0ZPvDm9Nlo+d02Z66InqZUk6tDzJhtotGDiQ78GIBhh2/xsiTWw6evHljNBso/ISc4w+L3va/jncXPYZHXZO835mh1cTT9HhaK07OCQw5I1VPx07N47AZBE14VE6TlNLXtKgEwJJ6TgPFkOoD6p3lCd8lHqZcfFtJUWGcmpryZmp/C4V4eYyEjbmh44BZ4oYkaXScRb9Yc5eA1SV5C/EZ4JuvQvWg+vuRIG1JILJgpMMUdiWDaJDxft+P3czbVwWVJp3xERBXTaFpg6YmngcI3zQzO27gWSlyTYIWkfb/5vRh/TQcJ1Wus+0TiKIakOmLqOlV+uv7elaj9fidkxXV1uDC+euMOLeY5PgFD1/6TBhJ8LvtKV2gyWrNLJtfG9yGtyBNTQAGS7TqymVWxiEPsOgacLfx/3RN/kwlIG2P9EhXakjIjTH48jpfh1Cv+KWNlkHEFHzTsZ/U5GBKZrIAmnGMWBUcjIBQ/qK5qTCrPNJQNa7MrkdjxwR18Ohj0KFCt21Ros6Lch08ImrY1BOQQdkBFibPgTxn4wQ6lw/XhPSjGnHlI+NSffXr7AZRi64G+KtW6BcRl4tclZlar1IGWdjcOPRvTLEwhHgkHRjSIKYTHGTUyHtkYKdS0j/e/y8e2As3j9O25o53gykZwAAAABJRU5ErkJggg==\"","import axios from \"axios\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { createSearchParams, useSearchParams } from \"react-router-dom\";\r\nimport { FindGuide } from \"../components/FindGuide\";\r\nimport { GuideCard } from \"../components/Guide/GuideCard\";\r\nimport { GuideLandingMenu } from \"../components/GuideLandingMenu\";\r\nimport { Title } from \"../components/Title\";\r\nimport { HOST_NAME } from \"../config\";\r\nimport { DefaultLayout } from \"../containers/DefaultLayout\";\r\nimport ActivityMenuCover from \"../images/GuideLandingCover.png\";\r\nimport Instagram from '../images/svg/instagram.png';\r\n\r\n\r\n\r\nexport const GuideLanding = () => {\r\n    // eslint-disable-next-line no-unused-vars\r\n    const [searchParams, setSearchParams] = useSearchParams();\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n\r\n    // Guides\r\n    const [guides, setGuides] = useState([]);\r\n    const [hasMore, setHasMore] = useState(true);\r\n\r\n    // Load latest guides at first\r\n    useEffect(() => searchGuides(), []);\r\n\r\n    // Load when guideMenu changes\r\n    useEffect(() => searchGuides(), [searchParams]);\r\n\r\n    const searchGuides = useCallback(() => {\r\n        const url = HOST_NAME + \"api/guide/search/\";\r\n        const params = new URLSearchParams();\r\n        params.append(\"limit\", \"6\");\r\n        params.append(\"cat\", searchParams.has(\"cat\") ? searchParams.get(\"cat\") : \"\");\r\n        params.append(\"q\", searchQuery);\r\n\r\n        axios.get(url, { params: params })\r\n            .then(response => {\r\n                if (response.status === 200) {\r\n                    setGuides(response.data.data);\r\n                    setHasMore(response.data.more);\r\n                }\r\n            });\r\n    }, [searchParams, searchQuery]);\r\n\r\n\r\n    const handleGuideMenu = useCallback((selected) => {\r\n        setSearchParams(createSearchParams({ cat: selected }));\r\n    }, [])\r\n\r\n    const handleShowMore = useCallback(() => {\r\n        if (!hasMore) return;\r\n\r\n        const url = HOST_NAME + \"api/guide/search/\";\r\n        const params = new URLSearchParams();\r\n        params.append(\"limit\", \"6\");\r\n        params.append(\"start\", guides.length);\r\n        params.append(\"cat\", searchParams.has(\"cat\") ? searchParams.get(\"cat\") : \"\");\r\n        params.append(\"q\", searchQuery);\r\n\r\n        axios.get(url, { params: params }).then(response => {\r\n            console.log(response.data);\r\n            if (response.status === 200) {\r\n                setGuides([...guides, ...response.data.data]);\r\n                setHasMore(response.data.more);\r\n            }\r\n        });\r\n    }, [guides, hasMore, searchParams, searchQuery]);\r\n\r\n    return (\r\n        <div className=\"guide-landing-wrapper\">\r\n            <DefaultLayout coverImage={ActivityMenuCover} >\r\n                <Title text=\"Find Your Guide\" />\r\n                <div className=\"home-wrapper\">\r\n                    <div className=\"find-guide\">\r\n                        <FindGuide onQueryChange={setSearchQuery} handleSearch={searchGuides} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"instagram-link\">\r\n                    <a href=\"https://www.instagram.com/mallorcamagic/guides/\" target=\"_blank\" rel=\"noopener noreferrer\">View this guide on instagram <img src={Instagram} alt=\"Instagram\" /></a>\r\n                </div>\r\n                <GuideLandingMenu handleGuideMenu={handleGuideMenu} />\r\n                <div className=\"guide-card-wrapper\">\r\n                    {guides.map((guide) => {\r\n                        return (\r\n                            <GuideCard key={guide.slug} image={guide.thumbnail[0]} title={guide.details.title[0]}\r\n                                desc={guide.details.creator} id={guide.slug} isSaved={guide.is_saved} />\r\n                        )\r\n                    })}\r\n                </div>\r\n                <div className=\"button-position\">\r\n                    {hasMore && <button onClick={handleShowMore}>See more</button>}\r\n                </div>\r\n            </DefaultLayout>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GuideLanding"],"sourceRoot":""}