{"version":3,"sources":["components/InstagramComponent/index.js","components/GuideHtmlAdComponent/index.js","views/GuideInstagram.js"],"names":["getEmbedUrl","url","match","replaceAll","console","log","concat","InstagramComponent","_ref","content","react_default","a","createElement","className","width","height","src","embed_url","frameBorder","title","text","GuideHtmlAd","htmlCode","containerRef","useRef","useEffect","iframe","current","contentWindow","document","open","write","close","addEventListener","e","this","style","body","offsetHeight","ref","marginBottom","GuideInstagram","slug","useParams","_useState","useState","_useState2","Object","slicedToArray","guide","setGuide","_useState3","_useState4","guidePoints","setGuidePoints","points","i","guide_points","length","guidePoint","type","push","prevPoint","id","data","sub_data","html","HOST_NAME","params","URLSearchParams","append","axios","get","then","response","status","Helmet","name","property","prefix","thumbnail","window","location","hostname","DefaultLayout","coverImage","coverText","details","alt","Title","long_desc","split","map","item","index","key","_idx","_id","InstagramComponent_InstagramComponent","GuideHtmlAdComponent","LoadingBar"],"mappings":"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","file":"static/js/22.d0ed3d2c.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst getEmbedUrl = (url) => {\r\n    url = url.replaceAll(\"reel\", \"p\");\r\n    // eslint-disable-next-line\r\n    const regExp = /(?:https?:\\/\\/www\\.)?instagram\\.com\\S*?\\/p\\/([\\w\\-]{11})\\/?/;\r\n    const match = url.match(regExp);\r\n    if (!match || !match[1]) {\r\n        console.log(\"Embede instagram url is not valid: \" + url);\r\n        return \"\";\r\n    }\r\n    console.log(match[1]);\r\n    return `https://www.instagram.com/p/${match[1]}/embed`;\r\n}\r\n\r\nexport const InstagramComponent = ({ content }) => {\r\n    return (\r\n        <div className=\"instagram-card-wrapper\">\r\n            <section>\r\n                <iframe width=\"385px\" height=\"642px\" src={getEmbedUrl(content.embed_url)} frameBorder=\"0\" title=\"instagram iframe\"></iframe>\r\n            </section>\r\n            <div className=\"text\">\r\n                {content.title &&\r\n                    <h2>{content.title}</h2>\r\n                }\r\n                <p>{content.text} </p>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useRef } from 'react';\r\n\r\nconst GuideHtmlAd = ({ htmlCode }) => {\r\n    const containerRef = useRef();\r\n\r\n    useEffect(() => {\r\n        const iframe = containerRef.current;\r\n        iframe.contentWindow.document.open();\r\n        iframe.contentWindow.document.write(htmlCode);\r\n        iframe.contentWindow.document.close();\r\n        iframe.addEventListener('load', function(e){\r\n            this.style.height = `${this.contentWindow.document.body.offsetHeight + 20}px`;\r\n        });\r\n    }, [htmlCode, containerRef]);\r\n\r\n    return (\r\n        <iframe title='Custom html widgets' ref={containerRef} style={{ width: \"100%\", marginBottom: \"3.21rem\"}} frameBorder=\"0\"></iframe>\r\n    )\r\n}\r\n\r\nexport default GuideHtmlAd;","import axios from 'axios';\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Helmet from 'react-helmet';\r\nimport { useParams } from \"react-router-dom\";\r\nimport { InstagramComponent } from '../components/InstagramComponent';\r\nimport LoadingBar from '../components/LoadingBar';\r\nimport { Title } from '../components/Title';\r\nimport { HOST_NAME } from \"../config\";\r\nimport { DefaultLayout } from '../containers/DefaultLayout';\r\nimport GuideHtmlAd from '../components/GuideHtmlAdComponent';\r\n\r\n\r\nconst getGuidePointJSX = (guidePoint, _id) => {\r\n    if (guidePoint.type === \"topic\")\r\n        return <Title text={guidePoint.data} />;\r\n    else if (guidePoint.type === \"embed\")\r\n        return <InstagramComponent key={_id} content={guidePoint} />\r\n    else if (guidePoint.type === \"ads\")\r\n        return <GuideHtmlAd key={_id} htmlCode={guidePoint.html} />\r\n    else {\r\n        console.log(\"Unknown guide point type: \" + guidePoint.type);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport const GuideInstagram = () => {\r\n    const { slug } = useParams();\r\n    const [guide, setGuide] = useState(null);\r\n    const [guidePoints, setGuidePoints] = useState([]);\r\n\r\n    // Populate guide points\r\n    useEffect(() => {\r\n        if (!guide) {\r\n            setGuidePoints([]);\r\n            return;\r\n        }\r\n\r\n        const points = [];\r\n        for (let i = 0; i < guide.guide_points.length; ++i) {\r\n            const guidePoint = guide.guide_points[i];\r\n            switch (guidePoint.type) {\r\n                case \"topic\":\r\n                    points.push(guidePoint);\r\n                    break;\r\n\r\n                case \"point\":\r\n                    console.log(\"Skipping point...\");\r\n                    break;\r\n\r\n                case \"embed\":\r\n                    if (i > 0 && guide.guide_points[i - 1].type === \"point\") {\r\n                        const prevPoint = guide.guide_points[i - 1];\r\n                        points.push({ id: i, type: \"embed\", title: prevPoint.data, embed_url: guidePoint.data, text: prevPoint.sub_data });\r\n                    } else {\r\n                        console.log(\"Embed doesn't have a point!!!\");\r\n                    }\r\n                    break;\r\n\r\n                case \"ads\":\r\n                    points.push({ id: i, type: \"ads\", html: guidePoint.data });\r\n                    break;\r\n\r\n                default:\r\n                    console.log(\"Default case\");\r\n            }\r\n        }\r\n        setGuidePoints(points);\r\n    }, [guide]);\r\n\r\n    // Load the guide data\r\n    useEffect(() => {\r\n        const url = HOST_NAME + \"api/guide/\";\r\n        const params = new URLSearchParams();\r\n        params.append(\"slug\", slug);\r\n        axios.get(url, { params: params }).then(response => {\r\n            console.log(response.data);\r\n            if (response.status === 200 && response.data.status === 'ok') {\r\n                setGuide(response.data.data);\r\n            }\r\n        });\r\n    }, [slug]);\r\n\r\n    if (!guide) return <LoadingBar />\r\n    return (\r\n        <div className=\"guide-instagram-wrapper\">\r\n            <Helmet>\r\n                <meta name=\"description\" property=\"og:description\" content=\"Puerto Portals  is one of the most prestigious yachting\r\n                            marinas in the Mediterranean. Tucked away on the\r\n                            southwestern coast of Mallorca, the port attracts the\r\n                            international jet-set crowd, who enjoy the first-class\"/>\r\n                <meta prefix=\"og: http://ogp.me/ns#\" property=\"og:title\" content=\"Mallorca Magic\" />\r\n                <meta prefix=\"og: http://ogp.me/ns#\" property=\"og:type\" content=\"{Your content}\" />\r\n                <meta prefix=\"og: http://ogp.me/ns#\" property=\"og:image\" content={guide.thumbnail[0]} />\r\n                <meta prefix=\"og: http://ogp.me/ns#\" property=\"og:url\" content={`${window.location.hostname}/guide-instagram/${slug}`} />\r\n                <meta name=\"author\" content=\"Mallorca Magic\"></meta>\r\n            </Helmet>\r\n\r\n\r\n            <DefaultLayout coverImage={guide.thumbnail[0]} coverText={guide.details.title[0]}>\r\n                <div className=\"first-post\">\r\n                    <img src={guide.thumbnail[1]} alt=\"Insta\" />\r\n                    <div className=\"text\">\r\n                        <Title text=\"\" />\r\n                        {\r\n                            guide.details.long_desc[0].split(\"\\n\").map((item, index) => {\r\n                                return <p key={index}>{item}</p>\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"guide-instagram\">\r\n                    {\r\n                        guidePoints.map((item, _idx) => {\r\n                            return getGuidePointJSX(item, _idx);\r\n                        })\r\n                    }\r\n                </div>\r\n            </DefaultLayout>\r\n        </div>\r\n    )\r\n}\r\nexport default GuideInstagram"],"sourceRoot":""}