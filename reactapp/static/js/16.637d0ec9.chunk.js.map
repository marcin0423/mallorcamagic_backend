{"version":3,"sources":["images/propertyContact.png","images/svg/arrow-left-black.svg","views/PropertyContact.js"],"names":["module","exports","__webpack_require__","p","PropertyContact","_useSearchParams","useSearchParams","searchParams","Object","E_Python_MallorcaMagc_clean_for_deploy_mallorcamagic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","_useState","useState","name","lastName","email","phone","checkbox","_useState2","formValues","setFormValues","_useState3","_useState4","loading","setLoading","_useState5","_useState6","recaptchaToken","setRecaptchaToken","recaptchaRef","useRef","handlerChange","useCallback","e","console","log","E_Python_MallorcaMagc_clean_for_deploy_mallorcamagic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","E_Python_MallorcaMagc_clean_for_deploy_mallorcamagic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","value","handleCheckBox","goBackToPreviousPage","preventDefault","window","history","back","handleSubmit","data","slug","get","first_name","last_name","recaptcha","axios","post","concat","HOST_NAME","then","resp","alert","catch","error","current","reset","react__WEBPACK_IMPORTED_MODULE_3___default","a","createElement","className","_containers_DefaultLayout__WEBPACK_IMPORTED_MODULE_8__","coverImage","PropertyContactImage","coverText","_components_Title__WEBPACK_IMPORTED_MODULE_7__","text","type","placeholder","onChange","onClick","react_router_dom__WEBPACK_IMPORTED_MODULE_4__","to","react_google_recaptcha__WEBPACK_IMPORTED_MODULE_12__","sitekey","GOOGLE_RECAPTCHA_SITE_KEY","token","ref","disabled","react_inlinesvg__WEBPACK_IMPORTED_MODULE_6__","src","ArrowLeft"],"mappings":"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","file":"static/js/16.637d0ec9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/propertyContact.c941e361.png\";","module.exports = __webpack_public_path__ + \"static/media/arrow-left-black.64f89c59.svg\";","import React, { useCallback, useState, useRef } from \"react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Isvg from 'react-inlinesvg';\r\nimport { Link } from \"react-router-dom\";\r\nimport { Title } from '../components/Title';\r\nimport { DefaultLayout } from '../containers/DefaultLayout';\r\nimport PropertyContactImage from '../images/propertyContact.png';\r\nimport ArrowLeft from '../images/svg/arrow-left-black.svg';\r\nimport { HOST_NAME, GOOGLE_RECAPTCHA_SITE_KEY } from '../config';\r\nimport ReCAPTCHA from \"react-google-recaptcha\";\r\n\r\nexport const PropertyContact = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const [formValues, setFormValues] = useState({ name: \"\", lastName: \"\", email: \"\", phone: \"\", checkbox: false });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Captcha\r\n  const [recaptchaToken, setRecaptchaToken] = useState(\"\");\r\n  const recaptchaRef = useRef();\r\n\r\n  const handlerChange = useCallback((e) => {\r\n    console.log(formValues)\r\n    setFormValues({ ...formValues, [e.target.name]: e.target.value })\r\n  }, [formValues])\r\n\r\n  const handleCheckBox = useCallback(() => {\r\n    setFormValues({ ...formValues, checkbox: !formValues.checkbox })\r\n  }, [formValues])\r\n\r\n  const goBackToPreviousPage = useCallback((e) => {\r\n    e.preventDefault();\r\n    window.history.back();\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(() => {\r\n    // send data to server\r\n    const data = {};\r\n    data.slug = searchParams.get(\"property\");\r\n    data.first_name = formValues.name;\r\n    data.last_name = formValues.lastName;\r\n    data.email = formValues.email;\r\n    data.phone = formValues.phone;\r\n    data.recaptcha = recaptchaToken;\r\n\r\n    setLoading(true);\r\n    axios.post(`${HOST_NAME}api/property/contact/`, data)\r\n      .then(resp => {\r\n        setLoading(false);\r\n        // go back to repvious page after successful submission\r\n        alert(\"Request submitted successfully\");\r\n        window.history.back();\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        setLoading(false);\r\n        if (recaptchaRef.current) recaptchaRef.current.reset();\r\n      });\r\n  }, [formValues, recaptchaToken, recaptchaRef]);\r\n\r\n  return (\r\n    <div className=\"property-contact-wrapper\">\r\n      <DefaultLayout coverImage={PropertyContactImage} coverText=\"Palma de majorca, Newly Built Sea View Apartment\">\r\n        <div className=\"property-contact\">\r\n          <Title text=\"More Information about the property\" />\r\n          <div className=\"form-wrapper\">\r\n            <input type=\"text\" name=\"name\" placeholder=\"First Name\" value={formValues.name} onChange={handlerChange} />\r\n            <input type=\"text\" name=\"lastName\" placeholder=\"Last Name\" value={formValues.lastName} onChange={handlerChange} />\r\n            <input type=\"text\" name=\"email\" placeholder=\"Email\" value={formValues.email} onChange={handlerChange} />\r\n            <input type=\"text\" name=\"phone\" placeholder=\"Phone\" value={formValues.phone} onChange={handlerChange} />\r\n            <div className=\"terms\">\r\n              <div className=\"checkbox\" onClick={handleCheckBox}><div className={formValues.checkbox ? \"check\" : \"ttt\"}></div> <div></div> </div>\r\n              <p>By checking here indicate that I have read and agree to the <Link to=\"/terms-conditions\">Terms and Conditions.</Link></p>\r\n            </div>\r\n            <ReCAPTCHA sitekey={GOOGLE_RECAPTCHA_SITE_KEY} onChange={token => setRecaptchaToken(token)} ref={recaptchaRef} />\r\n            <button disabled={!formValues.checkbox || loading} onClick={handleSubmit}>Send</button>\r\n          </div>\r\n          <div className=\"go-back\">\r\n            <Link to=\"#\" onClick={goBackToPreviousPage}> <Isvg src={ArrowLeft} /> Back to previous page</Link>\r\n          </div>\r\n        </div>\r\n      </DefaultLayout>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PropertyContact"],"sourceRoot":""}