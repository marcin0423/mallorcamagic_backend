(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{255:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(8),r=a.n(o),c=a(0),i=a.n(c),l=a(189),s=a(4),m=function(e){var t=(e=e.replaceAll("reel","p")).match(/(?:https?:\/\/www\.)?instagram\.com\S*?\/p\/([\w\-]{11})\/?/);return t&&t[1]?(console.log(t[1]),"https://www.instagram.com/p/".concat(t[1],"/embed")):(console.log("Embede instagram url is not valid: "+e),"")},p=function(e){var t=e.content;return i.a.createElement("div",{className:"instagram-card-wrapper"},i.a.createElement("section",null,i.a.createElement("iframe",{width:"385px",height:"642px",src:m(t.embed_url),frameBorder:"0",title:"instagram iframe"})),i.a.createElement("div",{className:"text"},t.title&&i.a.createElement("h2",null,t.title),i.a.createElement("p",null,t.text," ")))},d=a(69),u=a(14),g=a(6),h=a(64),f=function(e){var t=e.htmlCode,a=Object(c.useRef)();return Object(c.useEffect)(function(){var e=a.current;e.contentWindow.document.open(),e.contentWindow.document.write(t),e.contentWindow.document.close(),e.addEventListener("load",function(e){this.style.height="".concat(this.contentWindow.document.body.offsetHeight+20,"px")})},[t,a]),i.a.createElement("iframe",{title:"Custom html widgets",ref:a,style:{width:"100%",marginBottom:"3.21rem"},frameBorder:"0"})};a.d(t,"GuideInstagram",function(){return w});var w=function(){var e=Object(s.g)().slug,t=Object(c.useState)(null),a=Object(n.a)(t,2),o=a[0],m=a[1],w=Object(c.useState)([]),E=Object(n.a)(w,2),b=E[0],y=E[1];return Object(c.useEffect)(function(){if(o){for(var e=[],t=0;t<o.guide_points.length;++t){var a=o.guide_points[t];switch(a.type){case"topic":e.push(a);break;case"point":console.log("Skipping point...");break;case"embed":if(t>0&&"point"===o.guide_points[t-1].type){var n=o.guide_points[t-1];e.push({id:t,type:"embed",title:n.data,embed_url:a.data,text:n.sub_data})}else console.log("Embed doesn't have a point!!!");break;case"ads":e.push({id:t,type:"ads",html:a.data});break;default:console.log("Default case")}}y(e)}else y([])},[o]),Object(c.useEffect)(function(){var t=g.b+"api/guide/",a=new URLSearchParams;a.append("slug",e),r.a.get(t,{params:a}).then(function(e){console.log(e.data),200===e.status&&"ok"===e.data.status&&m(e.data.data)})},[e]),o?i.a.createElement("div",{className:"guide-instagram-wrapper"},i.a.createElement(l.a,null,i.a.createElement("meta",{name:"description",property:"og:description",content:"Puerto Portals  is one of the most prestigious yachting\r marinas in the Mediterranean. Tucked away on the\r southwestern coast of Mallorca, the port attracts the\r international jet-set crowd, who enjoy the first-class"}),i.a.createElement("meta",{prefix:"og: http://ogp.me/ns#",property:"og:title",content:"Mallorca Magic"}),i.a.createElement("meta",{prefix:"og: http://ogp.me/ns#",property:"og:type",content:"{Your content}"}),i.a.createElement("meta",{prefix:"og: http://ogp.me/ns#",property:"og:image",content:o.thumbnail[0]}),i.a.createElement("meta",{prefix:"og: http://ogp.me/ns#",property:"og:url",content:"".concat(window.location.hostname,"/guide-instagram/").concat(e)}),i.a.createElement("meta",{name:"author",content:"Mallorca Magic"})),i.a.createElement(h.a,{coverImage:o.thumbnail[0],coverText:o.details.title[0]},i.a.createElement("div",{className:"first-post"},i.a.createElement("img",{src:o.thumbnail[1],alt:"Insta"}),i.a.createElement("div",{className:"text"},i.a.createElement(u.a,{text:""}),o.details.long_desc[0].split("\n").map(function(e,t){return i.a.createElement("p",{key:t},e)}))),i.a.createElement("div",{className:"guide-instagram"},b.map(function(e,t){return n=t,"topic"===(a=e).type?i.a.createElement(u.a,{text:a.data}):"embed"===a.type?i.a.createElement(p,{key:n,content:a}):"ads"===a.type?i.a.createElement(f,{key:n,htmlCode:a.html}):(console.log("Unknown guide point type: "+a.type),null);var a,n})))):i.a.createElement(d.a,null)};t.default=w}}]);
//# sourceMappingURL=22.d0ed3d2c.chunk.js.map