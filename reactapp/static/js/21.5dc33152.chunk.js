(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{247:function(e,a,t){"use strict";t.r(a),t.d(a,"AccountSettings",function(){return h});var n=t(1),l=t(13),c=t(7),r=t(8),s=t.n(r),u=t(0),i=t.n(u),o=t(3),m=t(4),d=t(5),p=t(6),E=t(64),b=t(9),f=function(e,a){var t=Object(c.a)({},e,Object(l.a)({},a.target.name,a.target.value));return t.isValid=t.current.length>=6&&t.new.length>=6&&t.confirm.length>=6&&t.new===t.confirm,t},g=function(){var e=Object(u.useReducer)(f,{current:"",new:"",confirm:"",isValid:!1}),a=Object(n.a)(e,2),t=a[0],l=a[1],c=Object(u.useState)(!1),r=Object(n.a)(c,2),m=r[0],E=r[1],g=Object(u.useState)(""),h=Object(n.a)(g,2),w=h[0],v=h[1],O=Object(d.e)(b.a),j=Object(u.useCallback)(function(){t.isValid&&(E(!0),v(""),s.a.post("".concat(p.b,"api/accounts/change-pass/"),{current_password:t.current,password:t.new,confirm:t.confirm},{headers:{Authorization:"Token ".concat(O)}}).then(function(e){v("Password successfully updated")}).catch(function(e){return v(e.response.data.error)}).finally(function(){return E(!1)}))},[O,t,m,w]);return i.a.createElement("div",{className:"right"},i.a.createElement("h2",null,"Change Password"),i.a.createElement("div",{className:"input"},i.a.createElement("div",{className:""},i.a.createElement("label",null,"Current Password"),i.a.createElement(o.b,{to:"/"},"Forget password?")),i.a.createElement("input",{type:"password",name:"current",value:t.current,onChange:function(e){return l(e)}})),i.a.createElement("div",{className:"input"},i.a.createElement("label",null,"New Password"),i.a.createElement("input",{type:"password",name:"new",value:t.new,onChange:function(e){return l(e)}})),i.a.createElement("div",{className:"input"},i.a.createElement("label",null,"Confirm New Password"),i.a.createElement("input",{type:"password",name:"confirm",value:t.confirm,onChange:function(e){return l(e)}})),w&&i.a.createElement("div",{className:"error"},i.a.createElement("p",null,w)),i.a.createElement("button",{disabled:!t.isValid,onClick:j,className:m?"loading":""},"UPDATE PASSWORD"))},h=function(){var e=Object(u.useState)({username:"",email:""}),a=Object(n.a)(e,2),t=a[0],r=a[1],o=Object(u.useState)({weeklyNews:!1,guideAlart:!1,special:!1}),f=Object(n.a)(o,2),h=f[0],w=f[1],v=Object(u.useState)({userInfo:!1,password:!1}),O=Object(n.a)(v,2),j=O[0],N=O[1],k=Object(d.d)(b.b),y=Object(n.a)(k,2),C=y[0],A=y[1],S=Object(d.e)(b.a),P=Object(m.f)(),I=Object(u.useRef)(null),_=Object(u.useCallback)(function(e){e.username&&N(Object(c.a)({},j,{userInfo:!0})),console.log(e),s.a.post("".concat(p.b,"api/accounts/update/"),e,{headers:{Authorization:"Token ".concat(S)}}).then(function(e){200===e.status&&A({isLoggedIn:!0,user:e.data})}).catch(function(e){return console.log(e)}).finally(function(){e.username&&N(Object(c.a)({},j,{userInfo:!1}))})},[t,h,S,j]);Object(u.useEffect)(function(){C.isLoggedIn&&(r({username:C.user.username,email:C.user.email}),w({weeklyNews:C.user.news_letters,guideAlart:C.user.guide_alert,special:C.user.offers_alert}))},[C]),C.isLoggedIn||P("/login");var T=Object(u.useCallback)(function(e){r(Object(c.a)({},t,Object(l.a)({},e.target.name,e.target.value)))},[t]),D=Object(u.useCallback)(function(e){var a=Object(c.a)({},h,Object(l.a)({},e.target.name,e.target.checked));w(a),I.current&&(clearTimeout(I.current),I.current=null),I.current=setTimeout(function(){I.current=null,_({news_letters:a.weeklyNews,guide_alert:a.guideAlart,offers_alert:a.special})},1e3)},[h,w,I,_]),V=Object(u.useCallback)(function(){_({username:t.username})},[t]);return i.a.createElement("div",{className:"account-settings-wrapper"},i.a.createElement(E.a,null,i.a.createElement("div",{className:"account-settings"},i.a.createElement("div",{className:"header"},i.a.createElement("h1",null,"Account Settings")),i.a.createElement("div",{className:"account-wrapper"},i.a.createElement("div",{className:"left"},i.a.createElement("h2",null,"Profile Details"),i.a.createElement("div",{className:"input"},i.a.createElement("label",null,"Username"),i.a.createElement("input",{type:"text",placeholder:"John Doe",name:"username",value:t.username,onChange:T})),i.a.createElement("div",{className:"input"},i.a.createElement("label",null,"Email"),i.a.createElement("input",{type:"email",placeholder:"Johndoe@mail.com",name:"email",value:t.email,onChange:T})),i.a.createElement("button",{onClick:V,className:j.userInfo?"loading":""},"SAVE")),i.a.createElement(g,null)),i.a.createElement("div",{className:"notification-settings"},i.a.createElement("h2",null,"Notification Settings"),i.a.createElement("p",null,"We will still send you important notifications about your account outside of your notification settings"),i.a.createElement("div",{className:"toggle-options"},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("h3",null,"Weekly Newsletters"),i.a.createElement("div",{className:"switch"},i.a.createElement("input",{type:"checkbox",checked:h.weeklyNews,name:"weeklyNews",onChange:D}),i.a.createElement("span",{className:"slider round"}))),i.a.createElement("p",null,"These are update promotion about guide and properties every week")),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("h3",null,"Guide Alart"),i.a.createElement("div",{className:"switch"},i.a.createElement("input",{type:"checkbox",checked:h.guideAlart,name:"guideAlart",onChange:D}),i.a.createElement("span",{className:"slider round"}))),i.a.createElement("p",null,"Edit, Update or other alart of you save guides")),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("h3",null,"Special Discounts and Benefits"),i.a.createElement("div",{className:"switch"},i.a.createElement("input",{type:"checkbox",checked:h.special,name:"special",onChange:D}),i.a.createElement("span",{className:"slider round"}))),i.a.createElement("p",null,"Special discount update on properties near your")))))))};a.default=h}}]);
//# sourceMappingURL=21.5dc33152.chunk.js.map