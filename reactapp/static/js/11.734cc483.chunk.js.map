{"version":3,"sources":["images/svg/eye.svg","images/svg/key.svg","images/login.png","views/ResetPassword.js"],"names":["module","exports","__webpack_require__","p","ResetPassword","_useState","useState","_useState2","Object","E_Python_MallorcaMagc_clean_for_deploy_mallorcamagic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","showPassword","setShowPassword","_useState3","password","password2","_useState4","formValues","setFormValues","_useState5","_useState6","formValid","setFormValid","_useState7","_useState8","loading","setLoading","_useState9","_useState10","error","setError","_useSearchParams","useSearchParams","searchParams","_useState11","_useState12","success","setSuccess","showPasswordHandler","useCallback","idx","state","E_Python_MallorcaMagc_clean_for_deploy_mallorcamagic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__","handleChange","e","E_Python_MallorcaMagc_clean_for_deploy_mallorcamagic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","E_Python_MallorcaMagc_clean_for_deploy_mallorcamagic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","name","value","handleSubmit","url","concat","HOST_NAME","data","token","get","console","log","axios","post","then","resp","status","catch","err","finally","useEffect","length","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","_containers_DefaultLayout__WEBPACK_IMPORTED_MODULE_10__","coverImage","Wellcome","coverText","_components_Title__WEBPACK_IMPORTED_MODULE_8__","text","react_router_dom__WEBPACK_IMPORTED_MODULE_7__","to","react_inlinesvg__WEBPACK_IMPORTED_MODULE_6__","src","Password","type","placeholder","onChange","onClick","Eye","style","marginTop","disabled"],"mappings":"8EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,qDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,qDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wOCqGzBC,UA1FO,WAAM,IAAAC,EACgBC,mBAAS,EAAC,GAAO,IADjCC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACjBK,EADiBH,EAAA,GACHI,EADGJ,EAAA,GAAAK,EAEYN,mBAAS,CAAEO,SAAU,GAAIC,UAAW,KAFhDC,EAAAP,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAEjBI,EAFiBD,EAAA,GAELE,EAFKF,EAAA,GAAAG,EAGUZ,oBAAS,GAHnBa,EAAAX,OAAAC,EAAA,EAAAD,CAAAU,EAAA,GAGjBE,EAHiBD,EAAA,GAGNE,EAHMF,EAAA,GAAAG,EAIMhB,oBAAS,GAJfiB,EAAAf,OAAAC,EAAA,EAAAD,CAAAc,EAAA,GAIjBE,EAJiBD,EAAA,GAIRE,EAJQF,EAAA,GAAAG,EAKEpB,mBAAS,IALXqB,EAAAnB,OAAAC,EAAA,EAAAD,CAAAkB,EAAA,GAKjBE,EALiBD,EAAA,GAKVE,EALUF,EAAA,GAAAG,EAMDC,cAAhBC,EANiBxB,OAAAC,EAAA,EAAAD,CAAAsB,EAAA,MAAAG,EAOM3B,oBAAS,GAPf4B,EAAA1B,OAAAC,EAAA,EAAAD,CAAAyB,EAAA,GAOjBE,EAPiBD,EAAA,GAORE,EAPQF,EAAA,GASlBG,EAAsBC,sBAAY,SAACC,GACrC,IAAMC,EAAKhC,OAAAiC,EAAA,EAAAjC,CAAOE,GAClB8B,EAAMD,IAAQC,EAAMD,GACpB5B,EAAgB6B,IACjB,CAAC9B,IAEEgC,EAAeJ,sBAAY,SAACK,GAC9B1B,EAAcT,OAAAoC,EAAA,EAAApC,CAAA,GAAKQ,EAANR,OAAAqC,EAAA,EAAArC,CAAA,GAAmBmC,EAAEG,OAAOC,KAAOJ,EAAEG,OAAOE,UAC1D,CAAChC,IAEEiC,EAAeX,sBAAY,WAC7Bb,GAAW,GACXI,EAAS,IACT,IAAMqB,EAAG,GAAAC,OAAMC,IAAN,wCACHC,EAAO,CACTxC,SAAUG,EAAWH,SACrByC,MAAOtB,EAAauB,IAAI,UAE5BC,QAAQC,IAAIJ,GAEZK,IAAMC,KAAKT,EAAKG,GACXO,KAAK,SAAAC,GACkB,MAAhBA,EAAKC,OACL1B,GAAW,GAEXP,EAAS,8CAGhBkC,MAAM,SAAAC,GAAG,OAAInC,EAAS,mDACtBoC,QAAQ,kBAAMxC,GAAW,MAC/B,CAACT,EAAYgB,IAShB,OAPAkC,oBAAU,WACFlD,EAAWH,SAASsD,QAAU,GAAKnD,EAAWH,WAAaG,EAAWF,UACtEO,GAAa,GAEbA,GAAa,IAClB,CAACL,EAAYK,IAGZ+C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBACXH,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAeC,WAAYC,IAAUC,UAAU,6BAC3CP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBACXH,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAACM,EAAA,EAAD,CAAOC,KAAK,wBAEXjD,GAASwC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SAAS3C,GAE7BO,EAsBGiC,EAAAC,EAAAC,cAAA,0CACgCF,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CAAMC,GAAG,UAAT,UAtBhCX,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACXH,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACXH,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAMC,IAAKC,MACXd,EAAAC,EAAAC,cAAA,SAAOa,KAAMzE,EAAa,GAAK,OAAS,WAAY0E,YAAY,0BAA0BrC,KAAK,WAAWC,MAAOhC,EAAWH,SAAUwE,SAAU3C,IAChJ0B,EAAAC,EAAAC,cAAA,UAAQgB,QAAS,kBAAMjD,EAAoB,KAAI+B,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAMC,IAAKM,QAE9DnB,EAAAC,EAAAC,cAAA,KAAGkB,MAAO,CAAEC,WAAY,KAAxB,qCAEArB,EAAAC,EAAAC,cAAA,iCACAF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACXH,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAMC,IAAKC,MACXd,EAAAC,EAAAC,cAAA,SAAOa,KAAMzE,EAAa,GAAK,OAAS,WAAY0E,YAAY,0BAA0BrC,KAAK,YAAYC,MAAOhC,EAAWF,UAAWuE,SAAU3C,IAClJ0B,EAAAC,EAAAC,cAAA,UAAQgB,QAAS,kBAAMjD,EAAoB,KAAI+B,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAMC,IAAKM,QAG9DnB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACXH,EAAAC,EAAAC,cAAA,UAAQgB,QAASrC,EAAcsB,UAAW/C,EAAU,uBAAyB,eAAgBkE,SAAUlE,IAAYJ,GAAnH","file":"static/js/11.734cc483.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/eye.a325a359.svg\";","module.exports = __webpack_public_path__ + \"static/media/key.fdfd460c.svg\";","module.exports = __webpack_public_path__ + \"static/media/login.a9ced1f7.png\";","import axios from 'axios';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport Isvg from 'react-inlinesvg';\r\nimport { useSearchParams, Link } from 'react-router-dom';\r\nimport { Title } from '../components/Title';\r\nimport { HOST_NAME } from '../config';\r\nimport { DefaultLayout } from '../containers/DefaultLayout';\r\nimport Wellcome from '../images/login.png';\r\nimport Eye from '../images/svg/eye.svg';\r\nimport Password from '../images/svg/key.svg';\r\n\r\nconst ResetPassword = () => {\r\n    const [showPassword, setShowPassword] = useState([false, false]);\r\n    const [formValues, setFormValues] = useState({ password: \"\", password2: \"\" });\r\n    const [formValid, setFormValid] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(\"\");\r\n    const [searchParams] = useSearchParams();\r\n    const [success, setSuccess] = useState(false);\r\n\r\n    const showPasswordHandler = useCallback((idx) => {\r\n        const state = [...showPassword];\r\n        state[idx] = !state[idx];\r\n        setShowPassword(state);\r\n    }, [showPassword])\r\n\r\n    const handleChange = useCallback((e) => {\r\n        setFormValues({ ...formValues, [e.target.name]: e.target.value })\r\n    }, [formValues])\r\n\r\n    const handleSubmit = useCallback(() => {\r\n        setLoading(true);\r\n        setError(\"\");\r\n        const url = `${HOST_NAME}api/accounts/password_reset/confirm/`;\r\n        const data = {\r\n            password: formValues.password,\r\n            token: searchParams.get('token')\r\n        }\r\n        console.log(data);\r\n\r\n        axios.post(url, data)\r\n            .then(resp => {\r\n                if (resp.status === 200) {\r\n                    setSuccess(true);\r\n                } else {\r\n                    setError(\"Unknown error. Please try agauint later.\");\r\n                }\r\n            })\r\n            .catch(err => setError(\"token is expired or invalid. Please try again\"))\r\n            .finally(() => setLoading(false));\r\n    }, [formValues, searchParams]);\r\n\r\n    useEffect(() => {\r\n        if (formValues.password.length >= 8 && formValues.password === formValues.password2)\r\n            setFormValid(true);\r\n        else\r\n            setFormValid(false);\r\n    }, [formValues, setFormValid]);\r\n\r\n    return (\r\n        <div className=\"login-screen-wrapper\">\r\n            <DefaultLayout coverImage={Wellcome} coverText=\"Welcome to Mallorca Magic\">\r\n                <div className=\"login-wrapper\">\r\n                    <div>\r\n                        <Title text=\"Reset your password\" />\r\n\r\n                        {error && <div className=\"error\">{error}</div>}\r\n                        {\r\n                            !success ?\r\n                                <div className=\"login\">\r\n                                    <label>Reset password</label>\r\n                                    <div className=\"input\">\r\n                                        <Isvg src={Password} />\r\n                                        <input type={showPassword[0] ? \"text\" : \"password\"} placeholder=\"Enter a secure password\" name=\"password\" value={formValues.password} onChange={handleChange} />\r\n                                        <button onClick={() => showPasswordHandler(0)}><Isvg src={Eye} /></button>\r\n                                    </div>\r\n                                    <p style={{ marginTop: -10 }}>Must be atleast 8 characters long</p>\r\n\r\n                                    <label>Confirm password</label>\r\n                                    <div className=\"input\">\r\n                                        <Isvg src={Password} />\r\n                                        <input type={showPassword[1] ? \"text\" : \"password\"} placeholder=\"Enter a secure password\" name=\"password2\" value={formValues.password2} onChange={handleChange} />\r\n                                        <button onClick={() => showPasswordHandler(1)}><Isvg src={Eye} /></button>\r\n                                    </div>\r\n\r\n                                    <div className=\"buttons\">\r\n                                        <button onClick={handleSubmit} className={loading ? 'loading reset-button' : 'reset-button'} disabled={loading || !formValid}>Reset your Password</button>\r\n                                    </div>\r\n                                </div>\r\n                                :\r\n                                <div>\r\n                                    password reset successfull. <Link to=\"/login\">Login</Link>\r\n                                </div>\r\n                        }\r\n\r\n                    </div>\r\n                </div>\r\n            </DefaultLayout>\r\n        </div>\r\n    )\r\n}\r\nexport default ResetPassword;"],"sourceRoot":""}