{"version":3,"sources":["images/propertyOffers.png","images/svg/arrow-right.svg","utils/Pagination/index.js","views/PropertySelector.js"],"names":["module","exports","__webpack_require__","p","Pagination","_ref","productsPerPage","totalProducts","paginate","currentPage","pageNumbers","i","Math","ceil","push","handleNextPage","useCallback","length","react_default","a","createElement","className","map","number","key","onClick","esm","src","ArrowRight","PropertySelector","search","useLocation","_useState","useState","_useState2","Object","slicedToArray","properties","setProperties","_useState3","_useState4","setCurrentPage","_useState5","productPerPage","indexOfLastPost","indexOfFirstPost","currentPost","slice","pageNumber","_useState7","area","property","from","to","for","_useState8","queries","setQueries","useEffect","queryChanged","current","_useState9","setHasMore","useRef","params","URLSearchParams","get","append","details","price_int","axios","HOST_NAME","then","resp","console","log","status","data","concat","toConsumableArray","more","DefaultLayout","coverImage","PropertyOffers","coverText","values","setValues","item","_idx","SecondGuideCard","image","thumbnail","title","price","price_unit","price_amount","bedrooms","bathrooms","size_construction","id","slug","isSaved","is_saved","Pagination_Pagination"],"mappings":"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","file":"static/js/17.e0f281c1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/propertyOffers.64ac24a6.png\";","module.exports = __webpack_public_path__ + \"static/media/arrow-right.0237799c.svg\";","import React, { useCallback } from 'react';\r\nimport Isvg from 'react-inlinesvg';\r\nimport ArrowRight from '../../images/svg/arrow-right.svg';\r\n\r\nexport const Pagination = ({ productsPerPage, totalProducts, paginate, currentPage }) => {\r\n    const pageNumbers = [];\r\n    for (let i = 1; i <= Math.ceil(totalProducts / productsPerPage); i++) {\r\n        pageNumbers.push(i);\r\n\r\n    }\r\n\r\n    const handleNextPage = useCallback(() => {\r\n        if (pageNumbers.length >= currentPage + 1) {\r\n            paginate(currentPage + 1);\r\n        }\r\n    }, [currentPage, pageNumbers.length, paginate])\r\n\r\n    return (\r\n        <div className=\"pagination\">\r\n            {pageNumbers.map((number) => {\r\n                return (\r\n\r\n                    <button key={number} onClick={() => paginate(number)}> {number}</button>\r\n                )\r\n            })\r\n            }\r\n            <button className=\"next\" onClick={handleNextPage}>Next Page <Isvg src={ArrowRight} /> </button>\r\n        </div>\r\n    )\r\n}\r\n","import axios from 'axios';\r\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { SecondGuideCars } from '../components/Guide/GuideCard/SecondGuideCard';\r\nimport { PropertyOffers as PropertyOffersComponent } from '../components/PropertyOffers';\r\nimport { HOST_NAME } from '../config';\r\nimport { DefaultLayout } from '../containers/DefaultLayout';\r\nimport PropertyOffers from '../images/propertyOffers.png';\r\nimport { Pagination } from '../utils/Pagination/index';\r\n\r\nexport const PropertySelector = () => {\r\n    const { search } = useLocation();\r\n    const [properties, setProperties] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [productPerPage] = useState(8);\r\n    const indexOfLastPost = currentPage * productPerPage;\r\n    const indexOfFirstPost = indexOfLastPost - productPerPage;\r\n    const currentPost = properties.slice(indexOfFirstPost, indexOfLastPost);\r\n    const paginate = useCallback((pageNumber) => { setCurrentPage(pageNumber) }, []);\r\n\r\n    // Query data\r\n    const [queries, setQueries] = useState({\r\n        area: '',\r\n        property: '',\r\n        from: '',\r\n        to: '',\r\n        for: 'sale',\r\n    });\r\n    useEffect(() => queryChanged.current = true, [queries]);\r\n\r\n    const [, setHasMore] = useState(true);\r\n    const queryChanged = useRef(true);\r\n\r\n    useEffect(() => {\r\n        const params = new URLSearchParams(search);\r\n        setQueries(\r\n            {\r\n                area: params.get('area'),\r\n                property: params.get('type'),\r\n                from: params.get('fromPrice'),\r\n                to: params.get('toPrice'),\r\n                for: params.get('for'),\r\n            })\r\n        params.append(\"limit\", productPerPage);\r\n        if (properties.length !== 0 && !queryChanged.current) params.append(\"start\", properties[properties.length - 1].details.price_int);\r\n\r\n        axios.get(HOST_NAME + \"api/property/search/\", { params: params })\r\n            .then(resp => {\r\n                console.log(resp);\r\n                if (resp.status === 200) {\r\n                    if (queryChanged.current)\r\n                        setProperties(resp.data.data);\r\n                    else\r\n                        setProperties([...properties, ...resp.data.data]);\r\n                    setHasMore(resp.data.more);\r\n                    queryChanged.current = false;\r\n                }\r\n            })\r\n    }, [search])\r\n\r\n    return (\r\n        <div className=\"property-selector-wrapper\">\r\n            <DefaultLayout coverImage={PropertyOffers} coverText=\"Property offers\">\r\n\r\n                <div className=\"home-wrapper\">\r\n                    <div className=\"property-offers-wrapper\">\r\n\r\n                        <div className=\"property-offers\">\r\n                            <PropertyOffersComponent values={queries} setValues={setQueries} />\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div className=\"guide-card-wrapper\">\r\n                    {currentPost.map((item, _idx) => {\r\n                        return (\r\n                            <SecondGuideCars key={_idx} image={item.thumbnail[0]} title={item.details.title} price={`${item.details.price_unit} ${item.details.price_amount}`}\r\n                                bedrooms={item.details.bedrooms} bathrooms={item.details.bathrooms} area={item.details.size_construction} id={item.slug} isSaved={item.is_saved} />\r\n                        )\r\n                    })}\r\n                </div>\r\n                <Pagination productsPerPage={productPerPage} totalProducts={properties.length} paginate={paginate} currentPage={currentPage} />\r\n\r\n            </DefaultLayout>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PropertySelector"],"sourceRoot":""}